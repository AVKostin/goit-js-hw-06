<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Task 4</title>
        <link rel="stylesheet" href="../css/common.css" />
    </head>
    <body>
        <p><a href="index.html">Go back</a></p>
        <td class="quantity">
            <button class="quantity-btn" data-action="decrement">-</button>
            <input type="number" id="quantity_cart" name="quantity[<?php print $key_id ?>]" value="<?php print $prod['quantity'] ?>" class="inputbox" onchange="cart_popup.refreshCart();">
            <button class="quantity-btn" data-action="increment">+</button>
        </td>
        
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                console.log("DOM загружен");
                document.querySelectorAll('.quantity-btn').forEach(function(button) {
                    button.addEventListener('click', function() {
                        var input = this.parentElement.querySelector('input[type="number"]');
                        var action = this.dataset.action;
                        if (action === 'increment') {
                            input.stepUp();
                        } else if (action === 'decrement') {
                            input.stepDown();
                        }
                        console.log("Нажата кнопка: ", action);
                        console.log("Новое значение: ", input.value);
                        cart_popup.refreshCart(); // Вызов функции обновления корзины
                    });
                });
            });
        </script>
    </body>
</html>
